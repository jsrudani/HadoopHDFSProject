<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Fri Mar 06 22:12:57 CST 2015 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
BlockPlacementPolicyWithNodeGroup (Apache Hadoop HDFS 2.3.0 API)
</TITLE>

<META NAME="date" CONTENT="2015-03-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BlockPlacementPolicyWithNodeGroup (Apache Hadoop HDFS 2.3.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BlockPlacementPolicyWithNodeGroup.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementStatusDefault.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BlockPlacementPolicyWithNodeGroup.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.hadoop.hdfs.server.blockmanagement</FONT>
<BR>
Class BlockPlacementPolicyWithNodeGroup</H2>
<PRE>
<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by ">org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy
      <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by ">org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault
          <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyWithNodeGroup</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.47"><B>BlockPlacementPolicyWithNodeGroup</B></A><DT>extends org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</DL>
</PRE>

<P>
The class is responsible for choosing the desired number of targets
 for placing block replicas on environment with node-group layer.
 The replica placement strategy is adjusted to:
 If the writer is on a datanode, the 1st replica is placed on the local 
     node (or local node-group), otherwise a random datanode. 
 The 2nd replica is placed on a datanode that is on a different rack with 1st
     replica node. 
 The 3rd replica is placed on a datanode which is on a different node-group
     but the same rack as the second replica node.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clusterMap, considerLoad, heartbeatInterval, tolerateHeartbeatMultiplier</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#BlockPlacementPolicyWithNodeGroup()">BlockPlacementPolicyWithNodeGroup</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#BlockPlacementPolicyWithNodeGroup(org.apache.hadoop.conf.Configuration, org.apache.hadoop.hdfs.server.namenode.FSClusterStats, org.apache.hadoop.net.NetworkTopology)">BlockPlacementPolicyWithNodeGroup</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                                                   org.apache.hadoop.hdfs.server.namenode.FSClusterStats&nbsp;stats,
                                                                   org.apache.hadoop.net.NetworkTopology&nbsp;clusterMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#addToExcludedNodes(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, java.util.Set)">addToExcludedNodes</A></B>(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&nbsp;chosenNode,
                                     <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Find other nodes in the same nodegroup of <i>localMachine</i> and add them
 into <i>excludeNodes</i> as replica should not be duplicated for nodes 
 within the same nodegroup</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#chooseLocalRack(org.apache.hadoop.net.Node, java.util.Set, long, int, java.util.List, boolean, org.apache.hadoop.hdfs.StorageType)">chooseLocalRack</A></B>(org.apache.hadoop.net.Node&nbsp;localMachine,
                               <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                               long&nbsp;blocksize,
                               int&nbsp;maxNodesPerRack,
                               <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A>&gt;&nbsp;results,
                               boolean&nbsp;avoidStaleNodes,
                               <A HREF="../../../../../../org/apache/hadoop/hdfs/StorageType.html" title="enum in org.apache.hadoop.hdfs">StorageType</A>&nbsp;storageType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Choose one node from the rack that <i>localMachine</i> is on.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#chooseLocalStorage(org.apache.hadoop.net.Node, java.util.Set, long, int, java.util.List, boolean, org.apache.hadoop.hdfs.StorageType)">chooseLocalStorage</A></B>(org.apache.hadoop.net.Node&nbsp;localMachine,
                                     <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                     long&nbsp;blocksize,
                                     int&nbsp;maxNodesPerRack,
                                     <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A>&gt;&nbsp;results,
                                     boolean&nbsp;avoidStaleNodes,
                                     <A HREF="../../../../../../org/apache/hadoop/hdfs/StorageType.html" title="enum in org.apache.hadoop.hdfs">StorageType</A>&nbsp;storageType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;choose local node of localMachine as the target.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#chooseRemoteRack(int, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, java.util.Set, long, int, java.util.List, boolean, org.apache.hadoop.hdfs.StorageType)">chooseRemoteRack</A></B>(int&nbsp;numOfReplicas,
                                 org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&nbsp;localMachine,
                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                 long&nbsp;blocksize,
                                 int&nbsp;maxReplicasPerRack,
                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A>&gt;&nbsp;results,
                                 boolean&nbsp;avoidStaleNodes,
                                 <A HREF="../../../../../../org/apache/hadoop/hdfs/StorageType.html" title="enum in org.apache.hadoop.hdfs">StorageType</A>&nbsp;storageType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Choose <i>numOfReplicas</i> nodes from the racks 
 that <i>localMachine</i> is NOT on.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#getRack(org.apache.hadoop.hdfs.protocol.DatanodeInfo)">getRack</A></B>(org.apache.hadoop.hdfs.protocol.DatanodeInfo&nbsp;cur)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get rack string from a data node</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#initialize(org.apache.hadoop.conf.Configuration, org.apache.hadoop.hdfs.server.namenode.FSClusterStats, org.apache.hadoop.net.NetworkTopology)">initialize</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                     org.apache.hadoop.hdfs.server.namenode.FSClusterStats&nbsp;stats,
                     org.apache.hadoop.net.NetworkTopology&nbsp;clusterMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to setup a BlockPlacementPolicy object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#pickupReplicaSet(java.util.Collection, java.util.Collection)">pickupReplicaSet</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&gt;&nbsp;first,
                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&gt;&nbsp;second)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pick up replica node set for deleting replica as over-replicated.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>chooseRandom, chooseRandom, chooseReplicaToDelete, chooseTarget, verifyBlockPlacement</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>adjustSetsWithChosenReplica, getInstance, splitNodesWithRack</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BlockPlacementPolicyWithNodeGroup(org.apache.hadoop.conf.Configuration, org.apache.hadoop.hdfs.server.namenode.FSClusterStats, org.apache.hadoop.net.NetworkTopology)"><!-- --></A><H3>
BlockPlacementPolicyWithNodeGroup</H3>
<PRE>
protected <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.49"><B>BlockPlacementPolicyWithNodeGroup</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                            org.apache.hadoop.hdfs.server.namenode.FSClusterStats&nbsp;stats,
                                            org.apache.hadoop.net.NetworkTopology&nbsp;clusterMap)</PRE>
<DL>
</DL>
<HR>

<A NAME="BlockPlacementPolicyWithNodeGroup()"><!-- --></A><H3>
BlockPlacementPolicyWithNodeGroup</H3>
<PRE>
protected <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.54"><B>BlockPlacementPolicyWithNodeGroup</B></A>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="initialize(org.apache.hadoop.conf.Configuration, org.apache.hadoop.hdfs.server.namenode.FSClusterStats, org.apache.hadoop.net.NetworkTopology)"><!-- --></A><H3>
initialize</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.57"><B>initialize</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                       org.apache.hadoop.hdfs.server.namenode.FSClusterStats&nbsp;stats,
                       org.apache.hadoop.net.NetworkTopology&nbsp;clusterMap)</PRE>
<DL>
<DD><B>Description copied from class: <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy</CODE></B></DD>
<DD>Used to setup a BlockPlacementPolicy object. This should be defined by 
 all implementations of a BlockPlacementPolicy.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>initialize</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conf</CODE> - the configuration object<DD><CODE>stats</CODE> - retrieve cluster status from here<DD><CODE>clusterMap</CODE> - cluster topology</DL>
</DD>
</DL>
<HR>

<A NAME="chooseLocalStorage(org.apache.hadoop.net.Node, java.util.Set, long, int, java.util.List, boolean, org.apache.hadoop.hdfs.StorageType)"><!-- --></A><H3>
chooseLocalStorage</H3>
<PRE>
protected <A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A> <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.68"><B>chooseLocalStorage</B></A>(org.apache.hadoop.net.Node&nbsp;localMachine,
                                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                                 long&nbsp;blocksize,
                                                 int&nbsp;maxNodesPerRack,
                                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A>&gt;&nbsp;results,
                                                 boolean&nbsp;avoidStaleNodes,
                                                 <A HREF="../../../../../../org/apache/hadoop/hdfs/StorageType.html" title="enum in org.apache.hadoop.hdfs">StorageType</A>&nbsp;storageType)
                                          throws org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy.NotEnoughReplicasException</PRE>
<DL>
<DD>choose local node of localMachine as the target.
 if localMachine is not available, choose a node on the same nodegroup or 
 rack instead.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>chooseLocalStorage</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the chosen node
<DT><B>Throws:</B>
<DD><CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy.NotEnoughReplicasException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="chooseLocalRack(org.apache.hadoop.net.Node, java.util.Set, long, int, java.util.List, boolean, org.apache.hadoop.hdfs.StorageType)"><!-- --></A><H3>
chooseLocalRack</H3>
<PRE>
protected <A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A> <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.117"><B>chooseLocalRack</B></A>(org.apache.hadoop.net.Node&nbsp;localMachine,
                                              <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                              long&nbsp;blocksize,
                                              int&nbsp;maxNodesPerRack,
                                              <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A>&gt;&nbsp;results,
                                              boolean&nbsp;avoidStaleNodes,
                                              <A HREF="../../../../../../org/apache/hadoop/hdfs/StorageType.html" title="enum in org.apache.hadoop.hdfs">StorageType</A>&nbsp;storageType)
                                       throws org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy.NotEnoughReplicasException</PRE>
<DL>
<DD><B>Description copied from class: <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></B></DD>
<DD>Choose one node from the rack that <i>localMachine</i> is on.
 if no such node is available, choose one node from the rack where
 a second replica is on.
 if still no such node is available, choose a random node 
 in the cluster.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>chooseLocalRack</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the chosen node
<DT><B>Throws:</B>
<DD><CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy.NotEnoughReplicasException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="chooseRemoteRack(int, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, java.util.Set, long, int, java.util.List, boolean, org.apache.hadoop.hdfs.StorageType)"><!-- --></A><H3>
chooseRemoteRack</H3>
<PRE>
protected void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.157"><B>chooseRemoteRack</B></A>(int&nbsp;numOfReplicas,
                                org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&nbsp;localMachine,
                                <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                long&nbsp;blocksize,
                                int&nbsp;maxReplicasPerRack,
                                <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</A>&gt;&nbsp;results,
                                boolean&nbsp;avoidStaleNodes,
                                <A HREF="../../../../../../org/apache/hadoop/hdfs/StorageType.html" title="enum in org.apache.hadoop.hdfs">StorageType</A>&nbsp;storageType)
                         throws org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy.NotEnoughReplicasException</PRE>
<DL>
<DD>Choose <i>numOfReplicas</i> nodes from the racks 
 that <i>localMachine</i> is NOT on.
 if not enough nodes are available, choose the remaining ones 
 from the local rack
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>chooseRemoteRack</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy.NotEnoughReplicasException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getRack(org.apache.hadoop.hdfs.protocol.DatanodeInfo)"><!-- --></A><H3>
getRack</H3>
<PRE>
protected <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.223"><B>getRack</B></A>(org.apache.hadoop.hdfs.protocol.DatanodeInfo&nbsp;cur)</PRE>
<DL>
<DD><B>Description copied from class: <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy</CODE></B></DD>
<DD>Get rack string from a data node
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>getRack</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>rack of data node</DL>
</DD>
</DL>
<HR>

<A NAME="addToExcludedNodes(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, java.util.Set)"><!-- --></A><H3>
addToExcludedNodes</H3>
<PRE>
protected int <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.235"><B>addToExcludedNodes</B></A>(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&nbsp;chosenNode,
                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes)</PRE>
<DL>
<DD>Find other nodes in the same nodegroup of <i>localMachine</i> and add them
 into <i>excludeNodes</i> as replica should not be duplicated for nodes 
 within the same nodegroup
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>addToExcludedNodes</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>number of new excluded nodes</DL>
</DD>
</DL>
<HR>

<A NAME="pickupReplicaSet(java.util.Collection, java.util.Collection)"><!-- --></A><H3>
pickupReplicaSet</H3>
<PRE>
public <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&gt; <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html#line.260"><B>pickupReplicaSet</B></A>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&gt;&nbsp;first,
                                                                                                     <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor&gt;&nbsp;second)</PRE>
<DL>
<DD>Pick up replica node set for deleting replica as over-replicated. 
 First set contains replica nodes on rack with more than one
 replica while second set contains remaining replica nodes.
 If first is not empty, divide first set into two subsets:
   moreThanOne contains nodes on nodegroup with more than one replica
   exactlyOne contains the remaining nodes in first set
 then pickup priSet if not empty.
 If first is empty, then pick second.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>pickupReplicaSet</CODE> in class <CODE>org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BlockPlacementPolicyWithNodeGroup.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementStatusDefault.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyWithNodeGroup.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BlockPlacementPolicyWithNodeGroup.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicyDefault">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2015 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
