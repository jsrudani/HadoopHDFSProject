<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Fri Mar 06 22:12:43 CST 2015 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
HAUtil (Apache Hadoop HDFS 2.3.0 API)
</TITLE>

<META NAME="date" CONTENT="2015-03-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HAUtil (Apache Hadoop HDFS 2.3.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/HAUtil.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/hadoop/hdfs/DFSUtil.ConfiguredNNAddress.html" title="class in org.apache.hadoop.hdfs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/apache/hadoop/hdfs/NameNodeProxies.html" title="class in org.apache.hadoop.hdfs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/apache/hadoop/hdfs/HAUtil.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="HAUtil.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.hadoop.hdfs</FONT>
<BR>
Class HAUtil</H2>
<PRE>
<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.hadoop.hdfs.HAUtil</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.50"><B>HAUtil</B></A><DT>extends <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;org.apache.hadoop.io.Text</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#buildTokenServiceForLogicalUri(java.net.URI)">buildTokenServiceForLogicalUri</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A>&nbsp;uri)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the service name used in the delegation token for the given logical
 HA service.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#cloneDelegationTokenForLogicalUri(org.apache.hadoop.security.UserGroupInformation, java.net.URI, java.util.Collection)">cloneDelegationTokenForLogicalUri</A></B>(org.apache.hadoop.security.UserGroupInformation&nbsp;ugi,
                                                                   <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A>&nbsp;haUri,
                                                                   <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;<A HREF="http://download.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</A>&gt;&nbsp;nnAddrs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Locate a delegation token associated with the given HA cluster URI, and if
 one is found, clone it to also represent the underlying namenode address.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#getAddressOfActive(org.apache.hadoop.fs.FileSystem)">getAddressOfActive</A></B>(org.apache.hadoop.fs.FileSystem&nbsp;fs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the internet address of the currently-active NN.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;org.apache.hadoop.conf.Configuration</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#getConfForOtherNode(org.apache.hadoop.conf.Configuration)">getConfForOtherNode</A></B>(org.apache.hadoop.conf.Configuration&nbsp;myConf)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the configuration for this node, return a Configuration object for
 the other node in an HA setup.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#getNameNodeId(org.apache.hadoop.conf.Configuration, java.lang.String)">getNameNodeId</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                           <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;nsId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the namenode Id by matching the <code>addressKey</code>
 with the the address of the local node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#getNameNodeIdFromAddress(org.apache.hadoop.conf.Configuration, java.net.InetSocketAddress, java.lang.String...)">getNameNodeIdFromAddress</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</A>&nbsp;address,
                                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>...&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Similar to
 <CODE>DFSUtil.getNameServiceIdFromAddress(Configuration, 
 InetSocketAddress, String...)</CODE></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#getNameNodeIdOfOtherNode(org.apache.hadoop.conf.Configuration, java.lang.String)">getNameNodeIdOfOtherNode</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                                 <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;nsId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the NN ID of the other node in an HA setup.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#getServiceUriFromToken(org.apache.hadoop.security.token.Token)">getServiceUriFromToken</A></B>(org.apache.hadoop.security.token.Token&lt;org.apache.hadoop.hdfs.security.token.delegation.DelegationTokenIdentifier&gt;&nbsp;token)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parse the HDFS URI out of the provided token.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#isHAEnabled(org.apache.hadoop.conf.Configuration, java.lang.String)">isHAEnabled</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                       <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;nsId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if HA for namenode is configured for the given nameservice</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#isLogicalUri(org.apache.hadoop.conf.Configuration, java.net.URI)">isLogicalUri</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                         <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A>&nbsp;nameNodeUri)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#isTokenForLogicalUri(org.apache.hadoop.security.token.Token)">isTokenForLogicalUri</A></B>(org.apache.hadoop.security.token.Token&lt;org.apache.hadoop.hdfs.security.token.delegation.DelegationTokenIdentifier&gt;&nbsp;token)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#setAllowStandbyReads(org.apache.hadoop.conf.Configuration, boolean)">setAllowStandbyReads</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                         boolean&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#shouldAllowStandbyReads(org.apache.hadoop.conf.Configuration)">shouldAllowStandbyReads</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is used only by tests at the moment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/hadoop/hdfs/HAUtil.html#usesSharedEditsDir(org.apache.hadoop.conf.Configuration)">usesSharedEditsDir</A></B>(org.apache.hadoop.conf.Configuration&nbsp;conf)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if HA is using a shared edits directory.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="isHAEnabled(org.apache.hadoop.conf.Configuration, java.lang.String)"><!-- --></A><H3>
isHAEnabled</H3>
<PRE>
public static boolean <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.67"><B>isHAEnabled</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                  <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;nsId)</PRE>
<DL>
<DD>Returns true if HA for namenode is configured for the given nameservice
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conf</CODE> - Configuration<DD><CODE>nsId</CODE> - nameservice, or null if no federated NS is configured
<DT><B>Returns:</B><DD>true if HA is configured in the configuration; else false.</DL>
</DD>
</DL>
<HR>

<A NAME="usesSharedEditsDir(org.apache.hadoop.conf.Configuration)"><!-- --></A><H3>
usesSharedEditsDir</H3>
<PRE>
public static boolean <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.81"><B>usesSharedEditsDir</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf)</PRE>
<DL>
<DD>Returns true if HA is using a shared edits directory.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conf</CODE> - Configuration
<DT><B>Returns:</B><DD>true if HA config is using a shared edits dir, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="getNameNodeId(org.apache.hadoop.conf.Configuration, java.lang.String)"><!-- --></A><H3>
getNameNodeId</H3>
<PRE>
public static <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.98"><B>getNameNodeId</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                   <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;nsId)</PRE>
<DL>
<DD>Get the namenode Id by matching the <code>addressKey</code>
 with the the address of the local node.
 
 If <CODE>DFSConfigKeys.DFS_HA_NAMENODE_ID_KEY</CODE> is not specifically
 configured, this method determines the namenode Id by matching the local
 node's address with the configured addresses. When a match is found, it
 returns the namenode Id from the corresponding configuration key.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conf</CODE> - Configuration
<DT><B>Returns:</B><DD>namenode Id on success, null on failure.
<DT><B>Throws:</B>
<DD><CODE>org.apache.hadoop.HadoopIllegalArgumentException</CODE> - on error</DL>
</DD>
</DL>
<HR>

<A NAME="getNameNodeIdFromAddress(org.apache.hadoop.conf.Configuration, java.net.InetSocketAddress, java.lang.String...)"><!-- --></A><H3>
getNameNodeIdFromAddress</H3>
<PRE>
public static <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.121"><B>getNameNodeIdFromAddress</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                              <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</A>&nbsp;address,
                                              <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>...&nbsp;keys)</PRE>
<DL>
<DD>Similar to
 <CODE>DFSUtil.getNameServiceIdFromAddress(Configuration, 
 InetSocketAddress, String...)</CODE>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getNameNodeIdOfOtherNode(org.apache.hadoop.conf.Configuration, java.lang.String)"><!-- --></A><H3>
getNameNodeIdOfOtherNode</H3>
<PRE>
public static <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.137"><B>getNameNodeIdOfOtherNode</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                              <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;nsId)</PRE>
<DL>
<DD>Get the NN ID of the other node in an HA setup.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conf</CODE> - the configuration of this node
<DT><B>Returns:</B><DD>the NN ID of the other node in this nameservice</DL>
</DD>
</DL>
<HR>

<A NAME="getConfForOtherNode(org.apache.hadoop.conf.Configuration)"><!-- --></A><H3>
getConfForOtherNode</H3>
<PRE>
public static org.apache.hadoop.conf.Configuration <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.174"><B>getConfForOtherNode</B></A>(org.apache.hadoop.conf.Configuration&nbsp;myConf)</PRE>
<DL>
<DD>Given the configuration for this node, return a Configuration object for
 the other node in an HA setup.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>myConf</CODE> - the configuration of this node
<DT><B>Returns:</B><DD>the configuration of the other node in an HA setup</DL>
</DD>
</DL>
<HR>

<A NAME="shouldAllowStandbyReads(org.apache.hadoop.conf.Configuration)"><!-- --></A><H3>
shouldAllowStandbyReads</H3>
<PRE>
public static boolean <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.190"><B>shouldAllowStandbyReads</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf)</PRE>
<DL>
<DD>This is used only by tests at the moment.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if the NN should allow read operations while in standby mode.</DL>
</DD>
</DL>
<HR>

<A NAME="setAllowStandbyReads(org.apache.hadoop.conf.Configuration, boolean)"><!-- --></A><H3>
setAllowStandbyReads</H3>
<PRE>
public static void <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.194"><B>setAllowStandbyReads</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                        boolean&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isLogicalUri(org.apache.hadoop.conf.Configuration, java.net.URI)"><!-- --></A><H3>
isLogicalUri</H3>
<PRE>
public static boolean <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.203"><B>isLogicalUri</B></A>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                   <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A>&nbsp;nameNodeUri)</PRE>
<DL>
<DD><DL>

<DT><B>Returns:</B><DD>true if the given nameNodeUri appears to be a logical URI.
 This is the case if there is a failover proxy provider configured
 for it in the given configuration.</DL>
</DD>
</DL>
<HR>

<A NAME="getServiceUriFromToken(org.apache.hadoop.security.token.Token)"><!-- --></A><H3>
getServiceUriFromToken</H3>
<PRE>
public static <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A> <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.215"><B>getServiceUriFromToken</B></A>(org.apache.hadoop.security.token.Token&lt;org.apache.hadoop.hdfs.security.token.delegation.DelegationTokenIdentifier&gt;&nbsp;token)
                                  throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Parse the HDFS URI out of the provided token.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - if the token is invalid</DL>
</DD>
</DL>
<HR>

<A NAME="buildTokenServiceForLogicalUri(java.net.URI)"><!-- --></A><H3>
buildTokenServiceForLogicalUri</H3>
<PRE>
public static org.apache.hadoop.io.Text <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.239"><B>buildTokenServiceForLogicalUri</B></A>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A>&nbsp;uri)</PRE>
<DL>
<DD>Get the service name used in the delegation token for the given logical
 HA service.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>uri</CODE> - the logical URI of the cluster
<DT><B>Returns:</B><DD>the service name</DL>
</DD>
</DL>
<HR>

<A NAME="isTokenForLogicalUri(org.apache.hadoop.security.token.Token)"><!-- --></A><H3>
isTokenForLogicalUri</H3>
<PRE>
public static boolean <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.247"><B>isTokenForLogicalUri</B></A>(org.apache.hadoop.security.token.Token&lt;org.apache.hadoop.hdfs.security.token.delegation.DelegationTokenIdentifier&gt;&nbsp;token)</PRE>
<DL>
<DD><DL>

<DT><B>Returns:</B><DD>true if this token corresponds to a logical nameservice
 rather than a specific namenode.</DL>
</DD>
</DL>
<HR>

<A NAME="cloneDelegationTokenForLogicalUri(org.apache.hadoop.security.UserGroupInformation, java.net.URI, java.util.Collection)"><!-- --></A><H3>
cloneDelegationTokenForLogicalUri</H3>
<PRE>
public static void <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.260"><B>cloneDelegationTokenForLogicalUri</B></A>(org.apache.hadoop.security.UserGroupInformation&nbsp;ugi,
                                                     <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</A>&nbsp;haUri,
                                                     <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;<A HREF="http://download.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</A>&gt;&nbsp;nnAddrs)</PRE>
<DL>
<DD>Locate a delegation token associated with the given HA cluster URI, and if
 one is found, clone it to also represent the underlying namenode address.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ugi</CODE> - the UGI to modify<DD><CODE>haUri</CODE> - the logical URI for the cluster<DD><CODE>nnAddrs</CODE> - collection of NNs in the cluster to which the token
 applies</DL>
</DD>
</DL>
<HR>

<A NAME="getAddressOfActive(org.apache.hadoop.fs.FileSystem)"><!-- --></A><H3>
getAddressOfActive</H3>
<PRE>
public static <A HREF="http://download.oracle.com/javase/6/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</A> <A HREF="../../../../src-html/org/apache/hadoop/hdfs/HAUtil.html#line.297"><B>getAddressOfActive</B></A>(org.apache.hadoop.fs.FileSystem&nbsp;fs)
                                            throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Get the internet address of the currently-active NN. This should rarely be
 used, since callers of this method who connect directly to the NN using the
 resulting InetSocketAddress will not be able to connect to the active NN if
 a failover were to occur after this method has been called.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fs</CODE> - the file system to get the active address of.
<DT><B>Returns:</B><DD>the internet address of the currently-active NN.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - if an error occurs while resolving the active NN.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/HAUtil.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/hadoop/hdfs/DFSUtil.ConfiguredNNAddress.html" title="class in org.apache.hadoop.hdfs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/apache/hadoop/hdfs/NameNodeProxies.html" title="class in org.apache.hadoop.hdfs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/apache/hadoop/hdfs/HAUtil.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="HAUtil.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2015 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
